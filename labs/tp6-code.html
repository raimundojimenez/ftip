
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>25/10/2020 &#8212; Fundamental Tools for Image Processing</title>
    
  <link rel="stylesheet" href="../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jbvinc.css" />
    <link rel="stylesheet" type="text/css" href="../_static/.ipynb_checkpoints/jbvinc-checkpoint.css" />
    <link rel="stylesheet" type="text/css" href="../_static/spanels-index--0afa1ebdab0bb23b98b56d34c23d9f57.css" />
    <link rel="stylesheet" type="text/css" href="../_static/spanels-variables--ffc7f74dcb1b9eecba2dbcbc22818714.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Installing and Using Python" href="../python.html" />
    <link rel="prev" title="18/11/2020" href="tp5-code.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  
  <h1 class="site-logo" id="site-title">Fundamental Tools for Image Processing</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../preface.html">
   Preface
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Basics
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../definition.html">
   What is a Digital Image?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../operations.html">
   Arithmetic Operations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../histogram.html">
   Histogram
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../convolution.html">
   Convolution
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../fourier.html">
   Fourier Transform
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Compression
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../compression.html">
   Compression
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Mathematical Morphology
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../mm.html">
   Mathematical Morphology
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Registration
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../interpolation.html">
   Interpolation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../registration.html">
   Registration
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Segmentation
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation.html">
   Segmentation
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Restoration
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../denoising.html">
   Denoising
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../deconvolution.html">
   Deconvolution
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Feature Detection
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../feature/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../feature/edges.html">
   Edges detection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../feature/corners.html">
   Corner detection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../feature/lines.html">
   Line detection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../feature/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  In-Class Sessions
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../tp1.html">
   07/10/2020
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tp2.html">
   14/10/2020
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tp3.html">
   21/10/2020
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tp4.html">
   04/11/2020
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tp5.html">
   18/11/2020
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tp6.html">
   25/11/2020
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Corrections
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="tp1-code.html">
   07/10/2020
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tp2-code.html">
   14/10/2020
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tp3-code.html">
   21/10/2020
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tp4-code.html">
   04/11/2020
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tp5-code.html">
   18/11/2020
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   25/10/2020
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Appendices
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference external" href="https://moodle3.unistra.fr/course/view.php?id=13708">
   Moodle
   <i class="fas fa-external-link-alt">
   </i>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../python.html">
   Installing and Using Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../glossary.html">
   Glossary
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../biblio.html">
   References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../license.html">
   License
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/labs/tp6-code.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#detecteurs-de-sobel-et-de-canny">
   Détecteurs de Sobel et de Canny
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#detecteur-de-sobel">
     Détecteur de Sobel
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#detecteur-de-canny">
     Détecteur de Canny
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comparaison-des-deux-methodes-en-termes-de-temps-de-calcul">
     Comparaison des deux méthodes en termes de temps de calcul
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#detecteur-de-harris">
   Détecteur de Harris
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#transformee-de-hough">
   Transformée de Hough
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="id1">
<h1>25/10/2020<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="detecteurs-de-sobel-et-de-canny">
<h2>Détecteurs de Sobel et de Canny<a class="headerlink" href="#detecteurs-de-sobel-et-de-canny" title="Permalink to this headline">¶</a></h2>
<p>Les objectifs de cet exercice sont de :</p>
<ul class="simple">
<li><p>détecter des contours en utilisant les détecteurs de Sobel et de Canny</p></li>
<li><p>comprendre l’influence des paramètres de ces méthodes</p></li>
<li><p>comparer ces méthodes en termes de temps de calcul</p></li>
</ul>
<div class="cell tag_remove-input docutils container">
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/tp6-code_4_0.png" src="../_images/tp6-code_4_0.png" />
</div>
</div>
<div class="section" id="detecteur-de-sobel">
<h3>Détecteur de Sobel<a class="headerlink" href="#detecteur-de-sobel" title="Permalink to this headline">¶</a></h3>
<p>Le filtre de Sobel effectue une convolution de l’image par deux filtres, chacun permettant d’obtenir le gradient de l’image dans les deux dimensions. Ces deux gradients peuvent être fusionnés pour aboutir à l’image de contours ci-dessous à droite (comment est effectuée cette fusion ?).</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/tp6-code_7_0.png" src="../_images/tp6-code_7_0.png" />
</div>
</div>
<p>L’image de gradient peut être seuillée pour identifier les contours principaux. Les résultats pour trois valeurs de seuil sont donnés ci-dessous.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/tp6-code_9_0.png" src="../_images/tp6-code_9_0.png" />
</div>
</div>
<ul class="simple">
<li><p>On constate tout d’abord que plus le seuil est élevé, moins il y a de contours détectés
(il y a moins de pixels blancs).
Cela s’explique par le fait que moins de pixels auront un gradient supérieur au seuil,
et donc seront considérés comme des contours.</p></li>
<li><p>Lorsque le seuil est trop bas, des contours sont détectés partout.
En particulier, le fond de l’image étant (légèrement) bruité, des contours peuvent y être détectés.</p></li>
<li><p>Au contraire, lorsque le seuil est trop haut, il y a beaucoup de non-détections
même s’il n’y a presque plus de fausses alarmes.</p></li>
<li><p>Par ailleurs, même en fixant le seuil assez haut, certains contours sont très larges :
ils ont une largeur de plusieurs pixels, ce qui implique que le contour, bien que détecté,
n’est pas positionné avec précision.</p></li>
</ul>
</div>
<div class="section" id="detecteur-de-canny">
<h3>Détecteur de Canny<a class="headerlink" href="#detecteur-de-canny" title="Permalink to this headline">¶</a></h3>
<p>Le détecteur de Canny est plus complexe qu’un simple filtrage. Il comporte notamment un seuillage par hystérésis, c’est-à-dire une décision basée sur deux seuils <span class="math notranslate nohighlight">\(s_{bas}\)</span> et <span class="math notranslate nohighlight">\(s_{haut}\)</span> :</p>
<ul class="simple">
<li><p>les pixels d’intensité inférieure à <span class="math notranslate nohighlight">\(s_{bas}\)</span> ne seront pas détectés,</p></li>
<li><p>les pixels d’intensité supérieure à <span class="math notranslate nohighlight">\(s_{haut}\)</span> seront détectés comme des contours,</p></li>
<li><p>les pixels d’intensité comprise entre <span class="math notranslate nohighlight">\(s_{bas}\)</span> et <span class="math notranslate nohighlight">\(s_{haut}\)</span> seront détectés comme des contours uniquement si ils sont voisins d’autres contours.</p></li>
</ul>
<p><strong>Étude de l’influence de la largeur de la gaussienne (paramètre <code class="docutils literal notranslate"><span class="pre">sigma</span></code>)</strong></p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/tp6-code_14_0.png" src="../_images/tp6-code_14_0.png" />
</div>
</div>
<p>On observe que lorsque <code class="docutils literal notranslate"><span class="pre">sigma</span></code> augmente, le nombre de contours détecté est plus faible. Cela s’explique par le fait que la première étape du détecteur de Sobel est un filtrage de l’image par un filtre gaussien d’écart type <code class="docutils literal notranslate"><span class="pre">sigma</span></code> pour adoucir le bruit. En contrepartie, l’image est plus floue et donc les contours sont moins marqués : ils sont donc plus difficiles à détecter.</p>
<p><strong>Étude de l’influence du seuil bas (paramètre <code class="docutils literal notranslate"><span class="pre">low_threshold</span></code>)</strong></p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/tp6-code_17_0.png" src="../_images/tp6-code_17_0.png" />
</div>
</div>
<p>Lorsque le seuil bas augmente, le nombre de contours détecté diminue, puisqu’il y aura moins de pixels dont la valeur du gradient sera supérieure au seuil bas.</p>
<p><strong>Étude de l’influence du seuil haut (paramètre <code class="docutils literal notranslate"><span class="pre">high_threshold</span></code>)</strong></p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/tp6-code_20_0.png" src="../_images/tp6-code_20_0.png" />
</div>
</div>
<p>Comme précédemment, plus le seuil haut augmente, moins il y a de contours détectés.</p>
<p>En conclusion, on observe que le nombre de contours détectés diminue avec la valeur des seuils, comme pour le détecteur de Sobel. En revanche, le détecteur de Canny produit des contours fins et majoritairement continus : la détection est donc plus claire et plus précise.</p>
</div>
<div class="section" id="comparaison-des-deux-methodes-en-termes-de-temps-de-calcul">
<h3>Comparaison des deux méthodes en termes de temps de calcul<a class="headerlink" href="#comparaison-des-deux-methodes-en-termes-de-temps-de-calcul" title="Permalink to this headline">¶</a></h3>
<p>L’une des étapes du détecteur de Canny est d’appliquer un filtre de Sobel.
Par conséquent, on s’attend à ce que le détecteur de Canny soit plus lent que le détecteur de Sobel.
Pour cela, on mesure le temps nécessaire à chaque méthode pour détecter les contours de l’image.</p>
<p>Pour des raisons informatiques, les résultats ne sont pas parfaitement reproductibles :
si vous lancez deux fois la comparaison, les temps de calcul vont différer légèrement.
Aussi, dans l’exemple ci-dessous, les temps de calcul sont mesurés sur 100 simulations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">I</span> <span class="o">=</span> <span class="mi">100</span>           <span class="c1"># Nombre de simulations</span>
<span class="n">total_sobel</span> <span class="o">=</span> <span class="mi">0</span>   <span class="c1"># Temps total pour les I simulations pour le détecteur de Sobel</span>
<span class="n">total_canny</span> <span class="o">=</span> <span class="mi">0</span>   <span class="c1"># Temps total pour les I simulations pour le détecteur de Canny</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">I</span><span class="p">):</span>
    
    <span class="c1"># Temps de calcul du détecteur de Sobel</span>
    <span class="n">tic</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">sobel</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">y</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="c1"># N&#39;oubliez pas de prendre en compte le seuillage !</span>
    <span class="n">tac</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">tps_sobel</span> <span class="o">=</span> <span class="n">tac</span><span class="o">-</span><span class="n">tic</span>
    <span class="n">total_sobel</span> <span class="o">+=</span> <span class="n">tps_sobel</span>
    
    <span class="c1"># Temps de calcul du détecteur de Canny</span>
    <span class="n">tic</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">canny</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">tac</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">tps_canny</span> <span class="o">=</span> <span class="n">tac</span><span class="o">-</span><span class="n">tic</span>
    <span class="n">total_canny</span> <span class="o">+=</span> <span class="n">tps_canny</span>
    
    <span class="c1"># Affichage du temps de calcul des deux méthodes (pour les 10 premières simulations)</span>
    <span class="k">if</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sobel : </span><span class="si">{</span><span class="n">tps_sobel</span><span class="o">*</span><span class="mf">1e3</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> ms     Canny : </span><span class="si">{</span><span class="n">tps_canny</span><span class="o">*</span><span class="mf">1e3</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> ms&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">i</span><span class="o">==</span><span class="mi">10</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;etc.&quot;</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Le détecteur de Canny est donc, en moyenne, &quot;</span>
      <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;environ </span><span class="si">{</span><span class="n">total_canny</span><span class="o">/</span><span class="n">total_sobel</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> fois plus lent que le détecteur de Sobel.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Sobel : 1.624 ms     Canny : 13.765 ms
Sobel : 1.655 ms     Canny : 29.367 ms
Sobel : 2.108 ms     Canny : 23.828 ms
Sobel : 1.978 ms     Canny : 16.250 ms
Sobel : 1.861 ms     Canny : 13.845 ms
Sobel : 1.542 ms     Canny : 13.039 ms
Sobel : 1.416 ms     Canny : 12.851 ms
Sobel : 1.379 ms     Canny : 12.284 ms
Sobel : 1.370 ms     Canny : 12.117 ms
Sobel : 1.307 ms     Canny : 11.786 ms
etc.

Le détecteur de Canny est donc, en moyenne, environ 9 fois plus lent que le détecteur de Sobel.
</pre></div>
</div>
</div>
</div>
<p>Nous avions vu juste, le détecteur de Canny est plus lent que le détecteur de Sobel.
Cependant, le temps de calcul reste très acceptable pour des images de taille classique (environ 15 ms),
donc finalement la différence de temps entre les deux méthodes n’est pas préjudiciable dans la majorité des applications.</p>
</div>
</div>
<div class="section" id="detecteur-de-harris">
<h2>Détecteur de Harris<a class="headerlink" href="#detecteur-de-harris" title="Permalink to this headline">¶</a></h2>
<p>L’objectif de cet exercice est de détecter des coins à l’aide du détecteur de Harris.</p>
<div class="cell tag_remove-input docutils container">
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/tp6-code_30_0.png" src="../_images/tp6-code_30_0.png" />
</div>
</div>
<p>Le détecteur de Harris permet de détecter les coins d’une image, en se basant sur les différences d’intensité.</p>
<p>Avec la fonction <code class="docutils literal notranslate"><span class="pre">corner_harris</span></code>, choisissez <code class="docutils literal notranslate"><span class="pre">method='k'</span></code> et une valeur de <span class="math notranslate nohighlight">\(k\)</span> comprise entre 0 et 0,2. Il en résulte une nouvelle image, de même taille que l’image à analyser, dont les intensités sont proportionnelles à la présence d’un coin.</p>
<p>Dans les images ci-dessous, les intensités sont retreintes à l’intervalle <span class="math notranslate nohighlight">\([-0.4, 0.4]\)</span> afin de bien faire ressortir les valeurs de l’image</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/tp6-code_32_0.png" src="../_images/tp6-code_32_0.png" />
</div>
</div>
<p>La fonction <code class="docutils literal notranslate"><span class="pre">corner_peaks</span></code> retourne les coordonnées des valeurs fortes de l’image, qui correspondent aux coins. Ces coordonnées sont retournées sous forme de matrice dont la première colonne correspond aux ordonnées, la seconde aux abscisses.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/tp6-code_34_0.png" src="../_images/tp6-code_34_0.png" />
</div>
</div>
<p>Les images ci-dessus correspondent au résultat obtenu pour deux valeurs de <span class="math notranslate nohighlight">\(k\)</span>.
Lorsque le paramètre est suffisamment grand, seuls les coins les plus francs sont détectés :
on l’observe bien sur l’image de droite.</p>
<p>Cependant, tous les coins de l’objet ne sont pas détectés : comment améliorer le résultat ?</p>
<p>De plus, quelques points ne correspondent pas à des coins de l’objet.
Mais à y regarder de plus près, ils correspondent à des pixels d’intensité très différente de leurs voisins,
ce qui est la définition d’un coin pour Harris.
Par exemple, un zoom au niveau du trou de l’objet est représenté ci-dessous pour la première valeur de <span class="math notranslate nohighlight">\(k\)</span> testée.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/tp6-code_36_0.png" src="../_images/tp6-code_36_0.png" />
</div>
</div>
<p>D’après la définition d’un coin utilisée par Harris, il s’agit bien de coins que l’on observe ici…</p>
</div>
<div class="section" id="transformee-de-hough">
<h2>Transformée de Hough<a class="headerlink" href="#transformee-de-hough" title="Permalink to this headline">¶</a></h2>
<p>Les objectifs de cet exercice sont :</p>
<ul class="simple">
<li><p>de détecter des lignes dans une image avec la transformée de Hough</p></li>
<li><p>de savoir interpréter une transformée de Hough</p></li>
</ul>
<div class="cell tag_remove-input docutils container">
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/tp6-code_41_0.png" src="../_images/tp6-code_41_0.png" />
</div>
</div>
<p>La transformée de Hough s’applique sur des images binaires, qui doivent mettre en évidence les droites de l’image.
Aussi, une détection de contours semble tout à fait adaptée.
On applique donc le détecteur de Canny (ici, avec les paramètres par défaut) sur l’image puisque,
comme on l’a vu, il donne de meilleurs résultats que le détecteur de Sobel.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/tp6-code_43_0.png" src="../_images/tp6-code_43_0.png" />
</div>
</div>
<p>La méthode <code class="docutils literal notranslate"><span class="pre">hough_line</span></code> retourne l’accumulateur (la représentation de la transformée sur l’image) et les axes des abscisses et ordonnées correspondants.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/tp6-code_45_0.png" src="../_images/tp6-code_45_0.png" />
</div>
</div>
<p>Le résultat obtenu fait bien apparaître des sinusoïdes,
chacune correspondant à un pixel blanc de l’image des contours.
Lorsque les sinusoïdes se croisent, elles augmentent l’intensité du pixel du croisement.
Les pixels les plus lumineux de la transformée correspondent aux droites principales de l’image de contours.
La fonction <code class="docutils literal notranslate"><span class="pre">hough_line_peak</span></code> permet de mettre en évidence ces pixels :
les plus importants sont représentés par les cercles verts sur l’accumulateur,
et correspondent aux lignes représentées sur l’image ci-dessous.</p>
<p>En revanche, bien que le nombre de pics recherchés est fixé à 6, seuls 5 points sont trouvés.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/tp6-code_47_0.png" src="../_images/tp6-code_47_0.png" />
</div>
</div>
<p>Sauriez-vous identifier sur l’accumulateur où se trouvent les lignes restantes de l’image ?</p>
<p>Tentez de détecter le rond central de l’objet.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./labs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="tp5-code.html" title="previous page">18/11/2020</a>
    <a class='right-next' id="next-link" href="../python.html" title="next page">Installing and Using Python</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Vincent Mazet (University of Strasbourg, France)<br/>
        
            &copy; Copyright 2020.<br/>
          <div class="extra_footer">
            Fundamental Tools for Image Processing &mdash; Vincent Mazet (Université de Strasbourg), 2020 &mdash; <a href="license.html">CC BY-NC 4.0</a>.
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>